{"ast":null,"code":"var _jsxFileName = \"/home/karl/Projects/MovieSearchApp/src/Discover.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport MovieContainer from \"./MovieContainer\";\nimport { fetchMoviesJSON } from \"./api\";\nimport \"./app.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Discover() {\n  _s();\n  const [searchField, setSearchField] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [movieArray, setMovieArray] = useState([]);\n  const [mPage, setmPage] = useState(1);\n  const [resultName, setResultName] = useState('');\n  const [lastPage, setLastPage] = useState(1);\n  useEffect(() => {\n    const cachedData = localStorage.getItem('movieArray');\n    if (!cachedData) {\n      fetchMovies('batman', 1);\n      setmPage(1);\n    } else {\n      const parsedData = JSON.parse(cachedData);\n      setMovieArray(parsedData);\n      setLastPage(Math.ceil(parsedData.length / 10));\n    }\n  }, []);\n  const searchMovie = () => {\n    setmPage(1);\n    setResultName(searchField);\n    fetchMovies(searchField, 1);\n  };\n  const fetchMovies = async (searchName, page) => {\n    try {\n      const movies = await fetchMoviesJSON(searchName, page);\n      if (movies.Response === \"False\") {\n        setErrorMessage(movies.Error);\n      } else {\n        localStorage.setItem('movieArray', JSON.stringify(movies.Search));\n        setMovieArray(movies.Search);\n        setLastPage(Math.ceil(movies.totalResults / 10));\n      }\n      console.log(movies);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const onInputChange = e => {\n    setSearchField(e.target.value);\n  };\n  const errorDisplay = () => {\n    if (errorMessage) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 14\n      }, this);\n    }\n  };\n  const movieDisplay = () => {\n    if (movieArray.length !== 0) {\n      return movieArray.map((movie, key) => {\n        return /*#__PURE__*/_jsxDEV(MovieContainer, {\n          title: movie.Title,\n          year: movie.Year,\n          poster: movie.Poster,\n          imdbID: movie.imdbID\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 16\n        }, this);\n      });\n    }\n  };\n  const nextPage = () => {\n    if (mPage === lastPage) {\n      return;\n    }\n    console.log(mPage + 1);\n    fetchMovies(resultName, mPage + 1);\n    setmPage(mPage => mPage + 1);\n    console.log(lastPage);\n  };\n  const prevPage = () => {\n    if (mPage === 1) {\n      return;\n    }\n    console.log(mPage - 1);\n    fetchMovies(resultName, mPage - 1);\n    setmPage(mPage => mPage - 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mt-10 sm:w-1/2 lg:w-1/3 xl:w-1/4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"shadow-lg border rounded-full ml-4 px-4 font-bold w-full\",\n        onChange: onInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"ml-2 bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2\",\n        onClick: searchMovie,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), errorDisplay(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2 xl:grid-cols-5 gap-3 py-10 w-full md:w-2/3 place-items-center\",\n      children: movieDisplay()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pb-20 space-x-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2\",\n        onClick: prevPage,\n        children: \"Prev\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2\",\n        onClick: nextPage,\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(Discover, \"C8JQ7RfdchrMsJja3ylEN+gQzK4=\");\n_c = Discover;\nexport default Discover;\nvar _c;\n$RefreshReg$(_c, \"Discover\");","map":{"version":3,"names":["useState","useEffect","MovieContainer","fetchMoviesJSON","jsxDEV","_jsxDEV","Discover","_s","searchField","setSearchField","errorMessage","setErrorMessage","movieArray","setMovieArray","mPage","setmPage","resultName","setResultName","lastPage","setLastPage","cachedData","localStorage","getItem","fetchMovies","parsedData","JSON","parse","Math","ceil","length","searchMovie","searchName","page","movies","Response","Error","setItem","stringify","Search","totalResults","console","log","error","onInputChange","e","target","value","errorDisplay","children","fileName","_jsxFileName","lineNumber","columnNumber","movieDisplay","map","movie","key","title","Title","year","Year","poster","Poster","imdbID","nextPage","prevPage","className","onChange","onClick","_c","$RefreshReg$"],"sources":["/home/karl/Projects/MovieSearchApp/src/Discover.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport MovieContainer from \"./MovieContainer\";\nimport { fetchMoviesJSON } from \"./api\";\nimport \"./app.css\"\n\nfunction Discover() {\n  const [searchField,setSearchField] = useState('')\n  const [errorMessage,setErrorMessage] = useState(null)\n  const [movieArray, setMovieArray] = useState([])\n  const [mPage, setmPage] = useState(1);\n  const [resultName, setResultName] = useState('')\n  const [lastPage, setLastPage] = useState(1)\n\n  useEffect(() => {\n    const cachedData = localStorage.getItem('movieArray');\n    if(!cachedData){\n      fetchMovies('batman', 1);\n      setmPage(1);\n    }\n    else{\n      const parsedData = JSON.parse(cachedData);\n      setMovieArray(parsedData);\n      setLastPage(Math.ceil(parsedData.length/10));\n    }\n  }, [])\n\n  const searchMovie = () => {\n    setmPage(1);\n    setResultName(searchField);\n    fetchMovies(searchField, 1);\n  }\n  \n  const fetchMovies = async (searchName, page) => {\n    try{\n      const movies = await fetchMoviesJSON(searchName,page);\n      if(movies.Response === \"False\"){\n        setErrorMessage(movies.Error);\n      }\n      else{\n        localStorage.setItem('movieArray', JSON.stringify(movies.Search));\n        setMovieArray(movies.Search);\n        setLastPage(Math.ceil(movies.totalResults/10));\n      }\n      console.log(movies);\n    }\n    catch(error){\n      console.log(error);\n    }\n  }\n  \n  const onInputChange = (e) => {\n    setSearchField(e.target.value)\n  }\n\n  const errorDisplay = () => {\n    if(errorMessage){\n      return <p>{errorMessage}</p>\n    }\n  }\n\n  const movieDisplay = () => {\n    if(movieArray.length !== 0){\n      return movieArray.map((movie, key) => {\n        return <MovieContainer key={key} title={movie.Title} year={movie.Year} poster={movie.Poster} imdbID={movie.imdbID}></MovieContainer>\n      })\n    }\n  }\n\n   const nextPage = () => {\n    if(mPage === lastPage){\n        return;\n    }\n    console.log(mPage+1);\n    fetchMovies(resultName, mPage+1);\n    setmPage(mPage => mPage + 1);\n    console.log(lastPage)\n  }\n\n  const prevPage = () => {\n    if(mPage === 1){\n      return;\n    }\n    console.log(mPage-1);\n    fetchMovies(resultName, mPage-1);\n    \n    setmPage(mPage => mPage - 1);\n  }\n \n  return (\n    <div className=\"flex flex-col items-center space-y-4\">\n      <div className=\"flex mt-10 sm:w-1/2 lg:w-1/3 xl:w-1/4\">\n        <input className=\"shadow-lg border rounded-full ml-4 px-4 font-bold w-full\" onChange={onInputChange}></input>\n        <button className=\"ml-2 bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2\" onClick={searchMovie}>Search</button>\n      </div>\n      {errorDisplay()}\n      <div className=\"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2 xl:grid-cols-5 gap-3 py-10 w-full md:w-2/3 place-items-center\">\n        {movieDisplay()}\n      </div>\n      <div className=\"pb-20 space-x-3\">\n        <button className=\"bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2\" onClick={prevPage}>Prev</button>\n        <button className=\"bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2\" onClick={nextPage}>Next</button>\n      </div>\n    </div>\n    );\n}\n\nexport default Discover;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}